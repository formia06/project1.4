<%- include('partials/header'); -%>

<% if( action == 'new_income') { %>

<div class="btn">
  <a href="/erp">
    <p>Back</p>
  </a>
</div>

  <%- include('erpPartials/newIncome'); -%>

<% } else if( action == 'new_expense') { %>

  <div class="btn">
    <a href="/erp">
      <p>Back</p>
    </a>
  </div>

    <%- include('erpPartials/newExpense'); -%>


<% } else { %>
<div class="btn">
  <a href="/erp/new_income">
    <p>New Invoice</p>
  </a>
</div>

<div class="btn">
  <a href="/erp/new_expense">
    <p>New Bill</p>
  </a>
</div>

      <div class="erp-page-right col-lg-4">
        <div class="container-fluid">
          <div class="accounting-table table-responsive">
            <h2>Accounts Receivable</h2>
            <table class="table table-striped table-sm">
              <tr>
                <th>Invoice Number</th>
                <th>Customer</th>
                <th>Amount ($)</th>
                <th>Paid ($)</th>
                <th>Due Date</th>
              </tr>
              <%
                                  if(income.length > 0)
                                  {
                                      income.forEach(function(income){
                                  %>
              <tr>
                <td><a href="/erp/view_ar/<%= income.id%>"> <%= income.invoice_no %> </a></td>
                <td><%= income.name %></td>
                <td><%= income.amount %></td>
                <td><%= income.paid %></td>
                <td><%= income.duedate %></td>
              </tr>
              <%
                                      });
                                  }
                                  else
                                  {
                                  %>
              <tr>
                <td colspan="5">No Data Found</td>
              </tr>
              <%
                                  }
                                  %>


            </table>
          </div>

          <div class="accounting-table table-responsive">
            <h2>Accounts Payable</h2>
            <table class="table table-striped table-sm">
              <tr>
                <th scope="col">Invoice Number</th>
                <th scope="col">Supplier</th>
                <th scope="col">Amount ($)</th>
                <th scope="col">Paid ($)</th>
                <th scope="col">Due Date</th>
              </tr>
              <%
                                if(expenses.length > 0)
                                {
                                    expenses.forEach(function(expenses){
                                %>
              <tr>
                <td><a href="/erp/view_ap/<%= expenses.id%>"><%= expenses.bill_no %></a></td>
                <td><%= expenses.name %></td>
                <td><%= expenses.amount %></td>
                <td><%= expenses.paid %></td>
                <td><%= expenses.duedate %></td>
              </tr>
              <%
                                    });
                                }
                                else
                                {
                                %>
              <tr>
                <td colspan="5">No Data Found</td>
              </tr>
              <%
                                }
                                %>
            </table>
          </div>
        </div>
      </div>



    </div>

  </div>

<div class="container-fluid">
  <div class="accounting-table table-responsive">
    <h2>Departments</h2>
    <table class="table table-striped table-sm">
    <tr>
      <th>Department ID</th>
      <th>Description</th>
      <th>Role</th>

    </tr>
    <%
                                  if(departments.length > 0)
                                  {
                                      departments.forEach(function(departments){
                                  %>
    <tr>
      <td><%= departments.department_id %></td>
      <td><%= departments.description %></td>
      <td><%= departments.role %></td>
    </tr>

    <%  });
    }  else {  %>

    <tr>
      <td colspan="5">No Data Found</td>
    </tr>
    <%
          }
    %>
  </table>
</div>


<div class="container-fluid">
  <div class="accounting-table table-responsive">
    <h2>Projects</h2>
    <table class="table table-striped table-sm">
    <tr>
      <th>Project Name</th>
      <th>Project Number</th>

    </tr>
    <%
                                  if(project.length > 0)
                                  {
                                      project.forEach(function(project){
                                  %>
    <tr>
      <td><%= project.description %></td>
      <td><%= project.project_no %></td>
    </tr>

    <%  });
    }  else {  %>

    <tr>
      <td colspan="5">No Data Found</td>
    </tr>
    <%
          }
    %>
  </table>
</div>

<%
      }
%>


<%- include('partials/footer'); -%>
